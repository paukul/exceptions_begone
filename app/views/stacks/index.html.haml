.options
  %h2
    Options

  = form_tag project_stacks_url(@project, @stack), :method => "get" do
    = text_field_tag "search", params[:search]
    = submit_tag "Search"

  .filter.option
    %h3
      Filter status
      %span
        = " (#{session[:filter]})"
    %ul
      - filter_options.each do |k, v|
        %li{ :class => "#{'active' if session[:filter] == k}" }
          %a{ :href => project_stacks_path(@project, :filter => k) }
            = v

  .pagination.option
    %h3
      Items per page
      %span
        = " (#{session[:per_page]})"
    %ul
      - pagination_options.each do |v|
        %li{ :class => "#{'active' if session[:per_page] == v.to_s}" }
          %a{ :href => project_stacks_path(@project, :per_page => v) }
            = v
  .occured_since.option
    %h3
      Exceptions since
      %span
        = " (#{time_ago_in_words(session[:exceptions_since])})"
    %ul
      - [["1 day", 1.day.ago.to_i], ["1 hour", 1.hour.ago.to_i], ["5 minutes", 5.minutes.ago.to_i]].each do |k, v|
        %li{ :class => "#{'active' if session[:exceptions_since].to_i == v}"}
          %a{ :href => project_stacks_path(@project, :exceptions_since => v)}
            = k
  = link_to "exclusions", project_exclusions_path(@project)

.actions-bar
  .actions
    = will_paginate(@stacks)

%table{ :class => "table" }
  %caption
    %span
      Notifications
  %colgroup
    %col{ :class => "identifier" }
    %col{ :class => "amount_today" }
    %col{ :class => "amount" }
    %col{ :class => "category" }
    %col{ :class => "status" }
    %col{ :class => "updated-at" }
    %col{ :class => "last-occured-at" }
    %col{ :class => "action" }
  %thead
    %tr
      %th
        Identifier
      %th
        \# #{time_ago_in_words(session[:exceptions_since])}
      %th
        \#
      %th
        Category
      %th
        Status
      %th
        Updated at
      %th
        Last occured at
      %th
        Action
  %tfoot
    %tr
      %td{ :colspan => "7" }
  %tbody
    = render :partial => "stack", :collection => @stacks